<!--order_new content start-->
<!--title-->
<div class="row margin-bottom">
    <div class="col-md-12">
        <a ui-sref="admin.templates.create" class="btn btn-primary pull-right">新 建 模 板</a>

    </div>
</div>
<!--filter-->
<div class="row margin-bottom">
    <div class="col-md-12">
        <form class="form-inline">
            <div class="form-group">
                <label for="">模板号</label>
                <input type="text" class="form-control input-sm"
                       ng-model="filter.id"/>
            </div>
            &nbsp;&nbsp;
            <div class="form-group">
                <label for="">模板名</label>
                <input type="text" class="form-control input-sm"
                       ng-model="filter.name"/>
            </div>
            <button class="btn btn-default pull-right" ng-click="doRefresh()">查 询</button>
        </form>
        <form class="form-inline">
            <label> 审核状态</label>
            <label ng-repeat="a in options.status">
                <input type="radio" ng-model="filter.status" ng-value="a.value"/>{{a.label}}
            </label>
        </form>
        <pre>{{filter|json}}</pre>
    </div>
</div>
<!--table-->

<div class="row">
    <div class="col-md-12">
        <table class="table table-bordered table-condensed table-hover">
            <thead>
            <tr>
                <th ng-repeat="t in th" width="{{t.w}}%">
                    {{ t.n }}
                </th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="item in items">
                <td>{{item.id || '无'}}</td>
                <td>{{item.name|| '无'}}</td>
                <td>{{item.price|| '无'}}</td>
                <td>{{item.status| checkStatus}}</td>
                <td>
                    <a ui-sref="admin.templates.detail({id:item.id})">查看</a>
                    <!--已上线或者审核失败的可进行修改-->
                    <a ng-show="item.status==getStatusValue('ON')||item.status==getStatusValue('FAILED')">修改</a>
                    <!--下线后才可删除-->
                    <a ng-click="delete(item.id)" ng-show="item.status==getStatusValue('OFF')">删除</a>
                    <!--<a ng-click="update_status(item.id,item.status,'ON')">上线</a>-->
                    <!---->
                    <a ng-click="update_status(item.id,item.status,'OFF')" ng-show="item.status==getStatusValue('ON')">下线</a>
                    <!--审核中或者审核失败可取消-->
                    <a ng-click="update_status(item.id,item.status,'OFF')"
                       ng-show="item.status==getStatusValue('CHECKING')||item.status==getStatusValue('FAILED')">取消审核</a>
                </td>
            </tr>
            </tbody>
        </table>
        <pagination ng-model="page.index" total-items="page.total" items-per-page="page.count"
                    ng-change="doRefresh()"
                    max-size="9"
                    class="pagination-sm"
                    boundary-links="true" rotate="false" num-pages="total_pages"
                    previous-text="上一页" next-text="下一页"></pagination>
    </div>
</div>
<!--order_new content end-->